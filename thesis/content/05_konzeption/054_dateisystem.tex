\section{Dateisystem}\label{section:konzeption:dateisystem}

\begin{note}
    \textbf{Notizen:}
    \begin{itemize}
        \item Erwähnung von \autoref{requirement:Dateisystem}, \autoref{requirement:Dateisystem: CrossLab-Kompatibilität} und \autoref{requirement:Dateisystem: Kollaboration}
        \item Ggf. Erwähnung von \autoref{requirement:Standalone nutzbar}
        \item Vergleich verschiedener Konzepte (client- vs. server-side)
        \item Beschreibung der CrossLab-Services + Klassendiagramm
        \item Beschreibung der Kollaboration
        \item Beschreibung der Einbindung in die betrachtete Experimentkonfiguration
    \end{itemize}
\end{note}

Nach \autoref{requirement:Dateisystem} soll die IDE ein integriertes Dateisystem besitzen. Für dieses werden im Folgenden zunächst ein client-seitiger sowie ein server-seitiger Ansatz beschrieben.

Für den client-seitigen Lösungsansatz bietet sich eine Speicherung der Dateien des Nutzers innerhalb des Browsers an. Hierbei kann für die persistente Speicherung von Daten die Indexed Database API \cite{noauthor_indexed-database-api_nodate} genutzt werden. Diese wird von allen aktuellen Browsern unterstützt und erlaubt die langfristige Speicherung von größeren Datenmengen. Der Vorteil des client-seitigen Ansatzes ist die Tatsache, das kein weiterer Speicherplatz für die Nutzer bereitgestellt werden muss, da die Daten auf deren Geräten gespeichert werden. Allerdings sind die Daten sowohl an die Domain der IDE, das Gerät des Nutzers als auch an den spezifischen Browser gebunden und müssen ggf. durch entsprechendes Exportieren und Importieren übertragen werden.

Der server-seitige Lösungsansatz basiert darauf jedem Nutzer einen entsprechenden Speicherbereich zuzuteilen, in welchem seine Dateien gespeichert werden. Dies kann entweder über das Dateisystem des Servers oder über eine Datenbank geschehen. Der Vorteil dieser Art der Datenspeicherung liegt darin, dass sie unabhängig vom verwendeten Gerät und Browser ist. Allerdings werden für die Speicherung der Nutzerdaten entsprechender Speicherplatz auf dem Server benötigt wodurch höhere Kosten und ein höherer Verwaltungsaufwand entstehen können. Zudem muss sichergestellt werden, dass das System nicht ausgenutzt werden kann.

\autoref{requirement:Dateisystem: CrossLab-Kompatibilität} verlangt die Entwicklung von CrossLab-Services für die Bereitstellung und Nutzung von Dateisystemen. Dementsprechend werden im Folgenden der \textit{Filesystem Service Producer} und der \textit{Filesystem Service Consumer} beschrieben. In \autoref{figure:klassendiagramm-dateisystem-services} ist ein Klassendiagramm für die beiden CrossLab-Services dargestellt. Aus diesem können die bereitgestellten Operationen eines Dateisystems abgelesen werden. So müssen Dateisysteme die Erstellung von Ordnern und Dateien, das Lesen, Verschieben und Löschen dieser sowie das Schreiben von Dateien unterstützen. Weiterhin soll die Registrierung sogenannter \textit{Watcher} ermöglicht werden. Diese können von einem Filesystem Service Consumer für bestimmte Pfade registriert werden um über Änderungen innerhalb dieser informiert zu werden. Der Filesystem Service Consumer besitzt Funktionen um die einzelnen Operationen auszuführen, während der Filesystem Service Producer die Möglichkeit bietet auf eingehende Anfragen zu reagieren und entsprechende Antworten an den Filesystem Service Consumer zu senden.

\begin{figure}[tbp]
    \centering
    \begin{tikzpicture}
        \begin{class}[text width=6cm]{FilesystemServiceProducer}{0,0}
            \operation{+ onCreateDirectory()}
            \operation{+ onDelete()}
            \operation{+ onMove()}
            \operation{+ onReadDirectory()}
            \operation{+ onReadFile()}
            \operation{+ onWriteFile()}
            \operation{+ onRegisterWatcher()}
            \operation{+ onUnregisterWatcher()}
        \end{class}
        \begin{class}[text width=6cm]{FilesystemServiceConsumer}{7,0}
            \operation{+ createDirectory()}
            \operation{+ delete()}
            \operation{+ move()}
            \operation{+ readDirectory()}
            \operation{+ readFile()}
            \operation{+ writeFile()}
            \operation{+ registerWatcher()}
            \operation{+ unregisterWatcher()}
            \operation{+ onWatcherEvent()}
        \end{class}
    \end{tikzpicture}
    \caption{Klassendiagramm Filesystem Services}
    \label{figure:klassendiagramm-dateisystem-services}
\end{figure}

Nach \autoref{requirement:Dateisystem: Kollaboration} soll das Dateisystem das Teilen von Ordnern mit anderen Nutzern innerhalb eines Experiments unterstützen. Dafür können die in \autoref{section:konzeption:kollaboration} beschriebenen Collaboration Services genutzt werden. Beim Erstellen eines Experiments öffnen Nutzer einen Raum zum Teilen ihrer Ordner. Das geteilte JSON-Objekt hat dabei die Kennzeichner der verschiedenen Teilnehmer als Schlüssel mit den geteilten Ordnern des jeweiligen Teilnehmers als den dazugehörigen Wert. Wenn ein Nutzer einen Ordner teilt so soll dieser anderen Nutzern angezeigt werden. Diese können dann den Inhalt einsehen und bearbeiten. Die Implementierung der Synchronisation ist hierbei abhängig von dem verwendeten Code Editor. Weiterhin kann auch die aktuelle Position von Nutzern über deren Zustandsinformationen mit den anderen Nutzern geteilt werden. Die Position kann dann den anderen Nutzern innerhalb der entsprechenden Datei angezeigt werden.